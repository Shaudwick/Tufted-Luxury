<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="img/favicon.png" />
  <title>Checkout - Black Lobby</title>
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <div class="wrapper">
    <header class="header">
      <div class="header__container">
        <a href="index.html" class="header__logo logo">Black Lobby</a>
        <div class="header__navigation">
          <div class="header__menu menu">
            <nav class="menu__body">
              <ul class="menu__list">
                <li class="menu__item"><a href="index.html" class="menu__link">Home</a></li>
                <li class="menu__item"><a href="about.html" class="menu__link">About</a></li>
                <li class="menu__item"><a href="services.html" class="menu__link">Collections</a></li>
                <li class="menu__item"><a href="contact.html" class="menu__link">Contact</a></li>
              </ul>
              <a href="#" class="actions-header__button" id="cart-button">Cart (0)</a>
            </nav>
          </div>
          <div class="header__actions actions-header">
            <button type="button" class="menu__icon icon-menu"><span></span></button>
          </div>
        </div>
      </div>
    </header>

    <main class="page">
      <section class="services" style="padding-top: 8rem;">
        <div class="services__container">
          <h1 class="services__title">Checkout</h1>
          <div id="checkout-summary" style="max-width: 800px; margin: 0 auto;">
            <div id="checkout-items"></div>
            <div class="cart-total" style="margin-top: 2rem;">
              <h3>Subtotal: $<span id="summary-subtotal">0</span></h3>
              <p>Deposit Required (30%): $<span id="summary-deposit">0</span></p>
              <p style="color:#666; margin-top: .5rem;">Remaining Balance (on delivery): $<span id="summary-remaining">0</span></p>
            </div>
            <div style="display:flex; gap: 12px; flex-wrap: wrap; margin-top: 1.5rem;">
              <a id="summary-pay-card" class="button" target="_blank" rel="noopener">Pay with Card</a>
              <a id="summary-pay-paypal" class="button" target="_blank" rel="noopener">PayPal</a>
              <a id="summary-pay-venmo" class="button">Venmo</a>
              <a id="summary-pay-cashapp" class="button" target="_blank" rel="noopener">Cash App</a>
              <a id="summary-pay-zelle" class="button">Zelle Info</a>
              <a href="index.html" class="button">Continue Shopping</a>
            </div>
            <div id="zelle-details" style="display:none; margin-top: 1rem; border: 1px dashed #2c2c2c; padding: 12px;">
              Send Zelle to <strong id="zelle-dst">tickets@example.com</strong> for <strong id="zelle-amt">$0</strong>.
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="footer__container">
        <a href="#" class="footer__policy">Privacy Policy – Terms & Conditions</a>
        <a href="index.html" class="footer__logo logo">Black Lobby</a>
        <div class="footer__copyright">Copyright © 2024 Black Lobby – All Rights Reserved</div>
      </div>
    </footer>
  </div>

  <script>
    (function() {
      const DEPOSIT_PERCENTAGE = 0.3;
      const STRIPE_LINK = "https://book.stripe.com/test_8x26oI7IG7rOdfbdypcEw00"; // Stripe Payment Link
      const PAYPAL_ME = "https://paypal.me/YourName"; // replace
      const VENMO_USER = "YourVenmo"; // replace, no @
      const CASHAPP_TAG = "YourCashTag"; // replace, no $
      const ZELLE_EMAIL = "tickets@example.com"; // replace

      const itemsEl = document.getElementById('checkout-items');
      const subtotalEl = document.getElementById('summary-subtotal');
      const depositEl = document.getElementById('summary-deposit');
      const remainingEl = document.getElementById('summary-remaining');
      const payCard = document.getElementById('summary-pay-card');
      const payPayPal = document.getElementById('summary-pay-paypal');
      const payVenmo = document.getElementById('summary-pay-venmo');
      const payCashApp = document.getElementById('summary-pay-cashapp');
      const payZelle = document.getElementById('summary-pay-zelle');
      const zelleBox = document.getElementById('zelle-details');
      const zelleDst = document.getElementById('zelle-dst');
      const zelleAmt = document.getElementById('zelle-amt');

      function format(n) { return Number(n || 0).toFixed(2); }

      let cart = { items: [], total: 0 };
      try {
        const persisted = localStorage.getItem('cart');
        if (persisted) cart = JSON.parse(persisted) || cart;
      } catch(e) {}

      if (!cart.items || !cart.items.length) {
        itemsEl.innerHTML = '<p>Your cart is empty.</p>';
      } else {
        itemsEl.innerHTML = cart.items.map(i => (
          `<div class="cart-item">
            <h4>${i.collection.charAt(0).toUpperCase() + i.collection.slice(1)} Collection</h4>
            <p>Quantity: ${i.quantity}</p>
            <p>Price: $${format(i.price)}</p>
          </div>`
        )).join('');
      }

      const subtotal = cart.total || 0;
      const deposit = subtotal * DEPOSIT_PERCENTAGE;
      const remaining = subtotal - deposit;
      subtotalEl.textContent = format(subtotal);
      depositEl.textContent = format(deposit);
      remainingEl.textContent = format(remaining);

      // Payment links
      payCard.href = STRIPE_LINK;
      payPayPal.href = `${PAYPAL_ME}/${format(subtotal)}`;
      payVenmo.addEventListener('click', (e) => {
        e.preventDefault();
        const amt = format(subtotal);
        const note = encodeURIComponent('Black Lobby Order');
        const deepLink = `venmo://paycharge?txn=pay&recipients=${encodeURIComponent(VENMO_USER)}&amount=${amt}&note=${note}`;
        const webFallback = `https://venmo.com/u/${encodeURIComponent(VENMO_USER)}`;
        const timeout = setTimeout(() => window.open(webFallback, '_blank', 'noopener'), 800);
        window.location.href = deepLink;
        document.addEventListener('visibilitychange', () => { if (document.hidden) clearTimeout(timeout); }, { once: true });
      });
      payCashApp.href = `https://cash.app/$${encodeURIComponent(CASHAPP_TAG)}/${format(subtotal)}`;
      payZelle.addEventListener('click', () => {
        zelleDst.textContent = ZELLE_EMAIL;
        zelleAmt.textContent = `$${format(subtotal)}`;
        zelleBox.style.display = 'block';
      });
    })();
  </script>
</body>

</html>

